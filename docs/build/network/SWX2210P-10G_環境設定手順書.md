# SWX2210P-10G 環境設定手順書

## 1. 目次

<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1. 目次](#1-目次)
- [2. 目的・概要](#2-目的概要)
- [3. 前提条件](#3-前提条件)
- [4. 作業手順](#4-作業手順)
  - [4.1. 設定画面をブラウザで開く](#41-設定画面をブラウザで開く)
  - [4.2. IPアドレスを設定する](#42-ipアドレスを設定する)
  - [4.3. 使用するポートに説明をつける](#43-使用するポートに説明をつける)
  - [4.4. 使用しないポートを閉塞する](#44-使用しないポートを閉塞する)
  - [4.5. タグVLANを設定する](#45-タグvlanを設定する)
  - [4.6. 日付と時刻を設定する](#46-日付と時刻を設定する)
  - [4.7. アクセス等に必要なユーザとパスワードを設定する](#47-アクセス等に必要なユーザとパスワードを設定する)
    - [4.7.1. 管理パスワードと`ユーザー名なし`のログインパスワードを設定する](#471-管理パスワードとユーザー名なしのログインパスワードを設定する)
    - [4.7.2. 作業用ユーザを追加する](#472-作業用ユーザを追加する)
  - [4.8. Web GUIへのアクセスを制限する](#48-web-guiへのアクセスを制限する)
  - [4.9. telnetサーバへのアクセスを制限する](#49-telnetサーバへのアクセスを制限する)
- [5. 完了条件](#5-完了条件)

<!-- /code_chunk_output -->

## 2. 目的・概要

おうちネットワークのL2スイッチとなる`SWX2210P-10G`の環境設定を行う手順書です。

## 3. 前提条件

- `RTX830`の環境設定が完了していること
- `RTX830`からのLANケーブルが`SWX2210P-10G`のLAN1/10ポートに接続されていること
- 作業端末が`RTX830`にネットワーク越しに接続できること

## 4. 作業手順

### 4.1. 設定画面をブラウザで開く

1. `RTX830`の設定画面を開く
   - アドレス: <https://192.168.1.1/>
   - ログイン情報:
     - ユーザ名: 作業用ユーザのユーザ名
     - パスワード: 管理パスワード
2. `LANマップ`タブを押下する
3. `SWX2210P-10G`を選択する
4. `HTTPプロキシー経由で GUI を開く`を押下する

### 4.2. IPアドレスを設定する

1. `詳細設定`タブを押下する
2. 左ペインから`基本設定`を押下する
3. `IPv4 設定` > `設定`を押下する
4. 以下を指定する
    - VLAN ID: `1 (default)`
    - IPv4アドレス: `固定のIPアドレスを設定する`
      - `192.168.1.2` / `24`
    - IPv4 デフォルトゲートウェイ: `192.168.1.1`
5. `確認`を押下する
6. `設定の確定`を押下する
7. `SWX2210P-10G`の設定画面を開く
   - アドレス: <https://192.168.1.2/>
   - ログイン情報:
     - ユーザ: 空欄
     - パスワード: 空欄
8. `詳細設定`タブを押下する
9. 左ペインから`基本設定`を押下する
10. `IPv4 設定`に指定した設定が表示されていることを確認する

### 4.3. 使用するポートに説明をつける

各ポートごとに以下操作を繰り返します。

| ポート    | 説明           |
|-----------|----------------|
| port1.1   | `Desktop PC`   |
| port1.2   | `WLX313`       |
| port1.3   | `prox-01`      |
| port1.4   | `prox-01`  |
| port1.5   | `Aqara Hub`  |
| port1.9   | `Maintenance`  |
| port1.10  | `RTX830`       |

1. `詳細設定`タブを押下する
2. 左ペインから`インターフェース設定`を押下する
3. `物理インターフェース`を押下する
4. 各インターフェース > `設定`を押下する
5. `ポート`に設定対象のポートが表示されていることを確認する
6. 以下を指定する
    - 動作: `インターフェースを有効にする`
    - 説明: (上記表参照)
    - 速度 / 通信モード: `自動`
    - EEE機能: `無効 (省電力型イーサネット機能を使用しない)`
    - クロスストレート自動判別: `有効`
7. `確認`を押下する
8. `設定の確定`を押下する
9. 設定を行った各インターフェース > `設定`を押下し、指定した設定が表示されていることを確認する

### 4.4. 使用しないポートを閉塞する

1. `詳細設定`タブを押下する
2. 左ペインから`インターフェース設定`を押下する
3. `物理インターフェース`を押下する
4. `インターフェースの一覧`で、以下のインターフェースをチェックする
    - port1.6
    - port1.7
    - port1.8
5. `一括設定`を押下する
6. `ポート`にチェックしたポートのみが表示されていることを確認する
7. 以下を指定する
    - 動作: `インターフェースを無効にする`
    - 説明: (空欄)
    - 速度 / 通信モード: `自動`
    - EEE機能: `無効 (省電力型イーサネット機能を使用しない)`
    - クロスストレート自動判別: `有効`
8. `確認`を押下する
9. `設定の確定`を押下する
10. 設定を行った各インターフェース > `設定`を押下し、指定した設定が表示されていることを確認する

### 4.5. タグVLANを設定する

各ポートごとに以下操作を繰り返します。

| ポート   | 動作モード    | アクセスVLAN | ネイティブVLAN | トランクVLAN           | イングレスフィルター |
|----------|---------------|--------------|----------------|------------------------|----------------------|
| port1.1  | `アクセス`    | `10`         | -              | -                      | -                    |
| port1.2  | `トランク`    | -            | `1 (default)`  | `10`, `30`, `40`       | `有効`               |
| port1.3  | `アクセス`    | `20`         | -              | -                      | -                    |
| port1.4  | `トランク`    | -         | `21 (default)`              | `1`                      | `有効`                     |
| port1.5  | `アクセス`    | `40`         | -              | -                      | -                    |
| port1.9  | `アクセス`    | `1`         | -              | -                      | -                    |
| port1.10 | `トランク`    | -            | `1 (default)`  | `10`, `20`, `21`, `30`, `40` | `有効`               |

1. `詳細設定`タブを押下する
2. 左ペインから`VLAN`を押下する
3. `タグVLAN`を押下する
4. `タグVLANの設定` > `設定`を押下する
5. 上記表にしたがって、項目を指定する
6. `確認`を押下する
7. `設定の確定`を押下する
8. `タグVLANの設定`に、指定した設定が表示されていることを確認する

### 4.6. 日付と時刻を設定する

1. `管理`タブを押下する
2. 左ペインの`本体の設定`を押下する
3. `日時の同期設定` > `設定`を押下する
4. 以下を指定する
    - 日時の同期間隔: `24時間`
    - 問い合わせ先NTPサーバー
      - IPv4: `192.168.1.1`
5. `確認`を押下する
6. `設定の確定`を押下する
7. `日時の同期設定`に、指定した設定が表示されていることを確認する

### 4.7. アクセス等に必要なユーザとパスワードを設定する

#### 4.7.1. 管理パスワードと`ユーザー名なし`のログインパスワードを設定する

1. `管理`タブを押下する
2. 左ペインの`アクセス管理`を押下する
3. `ユーザの設定`を押下する
4. `パスワードの設定` > `設定`を押下する
5. 以下を指定する
      - 管理パスワード: （任意のパスワード）
      - 管理パスワード（確認）: （任意のパスワード）
      - ログインパスワード: （任意のパスワード）
      - ログインパスワード: （任意のパスワード）
      - パスワードの暗号化: 暗号化する
6. `確認`を押下する
7. `設定の確定`を押下する
8. `SWX2210P-10G`の設定画面を開く
   - アドレス: <https://192.168.1.2/>
   - ログイン情報:
     - ユーザ: 空欄
     - パスワード: (管理パスワード)
9. `管理`タブを押下する
10. 左ペインの`アクセス管理`を押下する
11. `管理パスワード`と`ログインパスワード`が`設定済み`であることを確認する

#### 4.7.2. 作業用ユーザを追加する

1. `管理`タブを押下する
2. 左ペインの`アクセス管理`を押下する
3. `ユーザの設定`を押下する
4. `ユーザの設定` > `新規`を押下する
5. 以下を指定する
    - ユーザー名
    - 新しいパスワード: （任意のパスワード）
    - 新しいパスワード（確認）: （任意のパスワード）
    - 管理者権限: `付与する`
6. `確認`を押下する
7. `設定の確定`を押下する
8. `ログアウト`を押下する
9. `SWX2210P-10G`の設定画面を開く
   - アドレス: <https://192.168.1.2/>
   - ログイン情報:
     - ユーザ: (作業用ユーザのユーザ名)
     - パスワード: (作業用ユーザのパスワード)
10. `管理`タブを押下する
11. 左ペインの`アクセス管理`を押下する
12. `ユーザーの設定`に、指定した設定が表示されていることを確認する

### 4.8. Web GUIへのアクセスを制限する

1. `管理`タブを押下する
2. 左ペインの`アクセス管理`を押下する
3. `各種サーバーの設定`を押下する
4. `Web GUI へのアクセス` > `設定`を押下する
5. 以下を指定する
    - HTTP サーバーのポート番号: `80`
    - セキュア HTTP サーバーの使用: `使用する`
      - ポート: `443`
    - HTTP サーバーにアクセス可能なクライアント: `条件を指定する`
      - 1
        - 動作: `許可する`
        - 条件: `IPアドレスを指定する`
        - IPアドレス: `192.168.1.0/24`
      - 2
        - 動作: `許可する`
        - 条件: `IPアドレスを指定する`
        - IPアドレス: `192.168.10.0/24`
    - 自動ログアウトまでの時間: `20分`
6. `確認`を押下する
7. `設定の確定`を押下する
8. `Web GUI へのアクセス`に、指定した設定が表示されていることを確認する

### 4.9. telnetサーバへのアクセスを制限する

1. `管理`タブを押下する
2. 左ペインの`アクセス管理`を押下する
3. `各種サーバーの設定`を押下する
4. `TELNET を使用したアクセス` > `設定`を押下する
5. 以下を指定する
    - TELNET サーバーの使用: `使用する`
      - ポート: `23`
    - HTTP サーバーにアクセス可能なクライアント: `条件を指定する`
      - 1
        - 動作: `許可する`
        - 条件: `IPアドレスを指定する`
        - IPアドレス: `192.168.1.0/24`
      - 2
        - 動作: `許可する`
        - 条件: `IPアドレスを指定する`
        - IPアドレス: `192.168.10.0/24`
6. `確認`を押下する
7. `設定の確定`を押下する
8. `TELNET を使用したアクセス`に、指定した設定が表示されていることを確認する

## 5. 完了条件

- `SWX2210P-10G`の設定が完了していること
- 作業端末から`RTX830`に通信ができること
- 作業端末からインターネットに通信ができること
- 作業端末に`VLAN10`のIPアドレスがDHCPによって配布されていること
